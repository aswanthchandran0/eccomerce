<%- include('./layout/header.ejs')-%>
<% currentPage = 'Sales Report' %>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.bootstrap5.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    /* Custom styles for sales report */
    .sales-report-card {
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        border: none;
    }
    
    .report-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 15px 15px 0 0;
        padding: 25px 30px;
        color: white;
        margin: -20px -20px 20px -20px;
    }
    
    .stats-card {
        border-radius: 10px;
        border: none;
        transition: transform 0.3s;
        margin-bottom: 20px;
    }
    
    .stats-card:hover {
        transform: translateY(-5px);
    }
    
    .stats-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }
    
    .filter-controls {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 25px;
    }
    
    .date-range-picker {
        background: white;
        border-radius: 8px;
        padding: 10px 15px;
        border: 1px solid #dee2e6;
    }
    
    .export-btn {
        border-radius: 8px;
        padding: 10px 20px;
        font-weight: 500;
        transition: all 0.3s;
    }
    
    .export-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .sales-table {
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid #e9ecef;
    }
    
    .sales-table thead th {
        background: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        font-weight: 600;
        color: #495057;
    }
    
    .status-badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
    }
    
    .status-active {
        background-color: #d1ecf1;
        color: #0c5460;
    }
    
    .status-delivered {
        background-color: #d4edda;
        color: #155724;
    }
    
    .status-cancelled {
        background-color: #f8d7da;
        color: #721c24;
    }
    
    .status-processing {
        background-color: #fff3cd;
        color: #856404;
    }
    
    .summary-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
    }
    
    .chart-container {
        height: 300px;
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .no-data {
        text-align: center;
        padding: 50px 20px;
    }
    
    .no-data i {
        font-size: 60px;
        color: #dee2e6;
        margin-bottom: 20px;
    }
    
    .pagination-container {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        margin-top: 20px;
    }
</style>

<div class="container-scroller">
    <!-- partial:partials/_sidebar.html -->
    <%- include('./layout/sideBar.ejs') -%>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_navbar.html -->

        <!-- partial -->
        <div class="main-panel">
            <div class="content-wrapper">
                <div class="row">
                    <div class="col-12">
                        <div class="card sales-report-card">
                            <!-- Report Header -->
                            <div class="report-header">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h4 class="card-title mb-1"><i class="fas fa-chart-line me-2"></i>Sales Report</h4>
                                        <p class="card-description mb-0">Track your sales performance and generate reports</p>
                                    </div>
                                    <div class="text-end">
                                        <div class="btn-group" role="group">
                                            <!-- <button type="button" class="btn btn-light export-btn me-2" onclick="exportToPDF()">
                                                <i class="fas fa-file-pdf me-2"></i> PDF
                                            </button> -->
                                            <button type="button" class="btn btn-light export-btn me-2" onclick="exportToExcel()">
                                                <i class="fas fa-file-excel me-2"></i> Excel
                                            </button>
                                            <!-- <button type="button" class="btn btn-light export-btn" onclick="printReport()">
                                                <i class="fas fa-print me-2"></i> Print
                                            </button> -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Stats Cards -->
                            <div class="row px-4 pt-2">
                                <div class="col-xl-3 col-sm-6">
                                    <div class="card stats-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="text-muted mb-1">Total Orders</h6>
                                                    <h3 class="mb-0"><%= orderData ? orderData.length : 0 %></h3>
                                                </div>
                                                <div class="stats-icon bg-primary">
                                                    <i class="fas fa-shopping-cart text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-sm-6">
                                    <div class="card stats-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="text-muted mb-1">Total Revenue</h6>
                                                    <h3 class="mb-0">₹<%= totalPrice ? totalPrice.toLocaleString() : '0' %></h3>
                                                </div>
                                                <div class="stats-icon bg-success">
                                                    <i class="fas fa-rupee-sign text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-sm-6">
                                    <div class="card stats-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="text-muted mb-1">Avg. Order Value</h6>
                                                    <h3 class="mb-0">₹<%= orderData && orderData.length > 0 ? Math.round(totalPrice / orderData.length).toLocaleString() : '0' %></h3>
                                                </div>
                                                <div class="stats-icon bg-info">
                                                    <i class="fas fa-chart-bar text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-sm-6">
                                    <div class="card stats-card">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="text-muted mb-1">Delivered Orders</h6>
                                                    <h3 class="mb-0"><%= orderData ? orderData.filter(o => o.orderStatus === 'delivered').length : 0 %></h3>
                                                </div>
                                                <div class="stats-icon bg-warning">
                                                    <i class="fas fa-check-circle text-white"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Filter Controls -->
                            <div class="row px-4">
                                <div class="col-12">
                                    <div class="filter-controls">
                                        <div class="row align-items-center">
                                            <div class="col-md-3 mb-3 mb-md-0">
                                                <h6 class="mb-0"><i class="fas fa-filter me-2"></i>Filter Reports</h6>
                                            </div>
                                            <div class="col-md-3 mb-3 mb-md-0">
                                                <select id="filterDropdown" class="form-select" onchange="applyFilter()">
                                                    <option value="all">All Time</option>
                                                    <option value="Day">Today</option>
                                                    <option value="Month">This Month</option>
                                                    <option value="year">This Year</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4 mb-3 mb-md-0">
                                                <div class="input-group date-range-picker">
                                                    <span class="input-group-text"><i class="fas fa-calendar"></i></span>
                                                    <input type="date" id="startDate" class="form-control border-0" placeholder="Start Date">
                                                    <span class="input-group-text">to</span>
                                                    <input type="date" id="endDate" class="form-control border-0" placeholder="End Date">
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <button class="btn btn-primary w-100" onclick="applyDateFilter()">
                                                    <i class="fas fa-search me-2"></i> Apply
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Sales Table -->
                            <div class="row px-4">
                                <div class="col-12">
                                    <div class="table-responsive sales-table">
                                        <table class="table table-hover" id="salesTable">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Order ID</th>
                                                    <th>Date</th>
                                                    <th>Customer</th>
                                                    <th>Status</th>
                                                    <th>Payment Method</th>
                                                    <th>Items</th>
                                                    <th class="text-end">Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody id="orderTableBody">
                                                <% if(orderData && orderData.length > 0){ %>
                                                    <% orderData.forEach((order, index)=> { %>
                                                    <tr>
                                                        <td><%= index + 1 %></td>
                                                        <td>
                                                            <span class="badge bg-light text-dark">#<%= order._id.toString().slice(-6).toUpperCase() %></span>
                                                        </td>
                                                        <td><%= new Date(order.orderDate).toLocaleDateString('en-IN', { 
                                                            year: 'numeric', 
                                                            month: 'short', 
                                                            day: 'numeric',
                                                            hour: '2-digit',
                                                            minute: '2-digit'
                                                        }) %></td>
                                                        <td>
                                                            <div class="d-flex flex-column">
                                                                <strong><%= order.address?.Fname || 'N/A' %></strong>
                                                                <small class="text-muted"><%= order.address?.Email || '' %></small>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <span class="status-badge status-<%= order.orderStatus %>">
                                                                <%= order.orderStatus.charAt(0).toUpperCase() + order.orderStatus.slice(1) %>
                                                            </span>
                                                        </td>
                                                        <td>
                                                            <span class="badge <%= order.paymentMethod === 'Online Payment' ? 'bg-success' : 
                                                                                order.paymentMethod === 'Cash on Delivery' ? 'bg-warning' : 
                                                                                order.paymentMethod === 'Wallet' ? 'bg-info' : 'bg-secondary' %>">
                                                                <%= order.paymentMethod %>
                                                            </span>
                                                        </td>
                                                        <td>
                                                            <span class="badge bg-light text-dark">
                                                                <%= order.productDetails.reduce((sum, item) => sum + (item.purchasedCount || 0), 0) %> items
                                                            </span>
                                                        </td>
                                                        <td class="text-end">
                                                            <strong class="text-success">₹<%= order.Total %></strong>
                                                        </td>
                                                    </tr>
                                                    <% }) %>
                                                <% } else { %>
                                                    <tr>
                                                        <td colspan="8" class="no-data">
                                                            <i class="fas fa-inbox"></i>
                                                            <h5 class="text-muted mt-3">No orders found</h5>
                                                            <p class="text-muted">Start selling to see reports here</p>
                                                        </td>
                                                    </tr>
                                                <% } %>
                                            </tbody>
                                            <tfoot>
                                                <tr class="summary-card">
                                                    <td colspan="6" class="text-end"><strong>Total Revenue:</strong></td>
                                                    <td colspan="2" class="text-end">
                                                        <h4 class="mb-0 text-success">₹<%= totalPrice ? totalPrice.toLocaleString() : '0' %></h4>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Pagination -->
                            <% if(totalPages > 1) { %>
                            <div class="row px-4 pb-4">
                                <div class="col-12">
                                    <div class="pagination-container">
                                        <nav aria-label="Sales report pagination">
                                            <ul class="pagination justify-content-center mb-0">
                                                <% if(currentPage > 1) { %>
                                                    <li class="page-item">
                                                        <a class="page-link" href="?page=<%= currentPage - 1 %>" aria-label="Previous">
                                                            <i class="fas fa-chevron-left"></i>
                                                        </a>
                                                    </li>
                                                <% } %>
                                                
                                                <% for(let i = 1; i <= totalPages; i++) { %>
                                                    <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                                                        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                                                    </li>
                                                <% } %>
                                                
                                                <% if(currentPage < totalPages) { %>
                                                    <li class="page-item">
                                                        <a class="page-link" href="?page=<%= currentPage + 1 %>" aria-label="Next">
                                                            <i class="fas fa-chevron-right"></i>
                                                        </a>
                                                    </li>
                                                <% } %>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
            <!-- content-wrapper ends -->
        </div>
        <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// Initialize DataTable
$(document).ready(function() {
    $('#salesTable').DataTable({
        pageLength: 10,
        lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
        dom: '<"row"<"col-md-6"l><"col-md-6"f>>rt<"row"<"col-md-6"i><"col-md-6"p>>',
        language: {
            search: "_INPUT_",
            searchPlaceholder: "Search orders..."
        }
    });
});

// Apply filter based on dropdown
function applyFilter() {
    const selectedValue = document.getElementById('filterDropdown').value;
    
    // Set date inputs based on filter
    const today = new Date();
    const startDateInput = document.getElementById('startDate');
    const endDateInput = document.getElementById('endDate');
    
    if (selectedValue === 'Day') {
        startDateInput.value = today.toISOString().split('T')[0];
        endDateInput.value = today.toISOString().split('T')[0];
    } else if (selectedValue === 'Month') {
        const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
        const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
        startDateInput.value = firstDay.toISOString().split('T')[0];
        endDateInput.value = lastDay.toISOString().split('T')[0];
    } else if (selectedValue === 'year') {
        const firstDay = new Date(today.getFullYear(), 0, 1);
        const lastDay = new Date(today.getFullYear(), 11, 31);
        startDateInput.value = firstDay.toISOString().split('T')[0];
        endDateInput.value = lastDay.toISOString().split('T')[0];
    }
    
    // Apply the filter
    applyDateFilter();
}

// Apply date filter
function applyDateFilter() {
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;
    const selectedFilter = document.getElementById('filterDropdown').value;
    
    let filterValue = selectedFilter;
    let startDateParam = '';
    let endDateParam = '';
    
    if (startDate && endDate) {
        filterValue = 'custom';
        startDateParam = `&start=${startDate}`;
        endDateParam = `&end=${endDate}`;
    }
    
    $.ajax({
        url: `/admin/salesfilter?value=${filterValue}${startDateParam}${endDateParam}`,
        method: 'GET',
        success: function(response) {
            updateTable(response);
            updateStats(response);
        },
        error: function(error) {
            console.error('Error applying filter:', error);
            alert('Error applying filter. Please try again.');
        }
    });
}

// Update table with filtered data
function updateTable(response) {
    const orderTableBody = document.getElementById('orderTableBody');
    orderTableBody.innerHTML = '';
    
    if (response.filteredOrders && response.filteredOrders.length > 0) {
        response.filteredOrders.forEach((order, index) => {
            const orderDate = order.orderDate instanceof Date ? order.orderDate : new Date(order.orderDate);
            
            // Calculate total items
            const totalItems = order.productDetails.reduce((sum, item) => sum + (item.purchasedCount || 0), 0);
            
            // Get status class
            const statusClass = `status-${order.orderStatus}`;
            
            // Get payment method badge class
            let paymentBadgeClass = 'bg-secondary';
            if (order.paymentMethod === 'Online Payment') paymentBadgeClass = 'bg-success';
            else if (order.paymentMethod === 'Cash on Delivery') paymentBadgeClass = 'bg-warning';
            else if (order.paymentMethod === 'Wallet') paymentBadgeClass = 'bg-info';
            
            const row = `
                <tr>
                    <td>${index + 1}</td>
                    <td><span class="badge bg-light text-dark">#${order._id.toString().slice(-6).toUpperCase()}</span></td>
                    <td>${orderDate.toLocaleDateString('en-IN', { 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })}</td>
                    <td>
                        <div class="d-flex flex-column">
                            <strong>${order.address?.Fname || 'N/A'}</strong>
                            <small class="text-muted">${order.address?.Email || ''}</small>
                        </div>
                    </td>
                    <td>
                        <span class="status-badge ${statusClass}">
                            ${order.orderStatus.charAt(0).toUpperCase() + order.orderStatus.slice(1)}
                        </span>
                    </td>
                    <td><span class="badge ${paymentBadgeClass}">${order.paymentMethod}</span></td>
                    <td><span class="badge bg-light text-dark">${totalItems} items</span></td>
                    <td class="text-end"><strong class="text-success">₹${order.Total}</strong></td>
                </tr>
            `;
            orderTableBody.innerHTML += row;
        });
    } else {
        orderTableBody.innerHTML = `
            <tr>
                <td colspan="8" class="no-data">
                    <i class="fas fa-inbox"></i>
                    <h5 class="text-muted mt-3">No orders found</h5>
                    <p class="text-muted">No sales data for the selected period</p>
                </td>
            </tr>
        `;
    }
    
    // Update DataTable
    $('#salesTable').DataTable().destroy();
    $('#salesTable').DataTable({
        pageLength: 10,
        lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
        dom: '<"row"<"col-md-6"l><"col-md-6"f>>rt<"row"<"col-md-6"i><"col-md-6"p>>'
    });
}

// Update stats cards
function updateStats(response) {
    if (response.filteredOrders && response.filteredOrders.length > 0) {
        const totalOrders = response.filteredOrders.length;
        const totalRevenue = response.totalPrice || 0;
        const avgOrderValue = totalOrders > 0 ? Math.round(totalRevenue / totalOrders) : 0;
        const deliveredOrders = response.filteredOrders.filter(o => o.orderStatus === 'delivered').length;
        
        // Update stats cards
        document.querySelector('.stats-card:nth-child(1) h3').textContent = totalOrders.toLocaleString();
        document.querySelector('.stats-card:nth-child(2) h3').textContent = '₹' + totalRevenue.toLocaleString();
        document.querySelector('.stats-card:nth-child(3) h3').textContent = '₹' + avgOrderValue.toLocaleString();
        document.querySelector('.stats-card:nth-child(4) h3').textContent = deliveredOrders.toLocaleString();
    }
}

// Export to PDF
function exportToPDF() {
    // Destroy DataTable to get original table
    $('#salesTable').DataTable().destroy();
    
    // Create a temporary table for export
    const exportTable = document.createElement('table');
    exportTable.innerHTML = document.getElementById('salesTable').innerHTML;
    
    // Remove action buttons from export
    const buttons = exportTable.querySelectorAll('.btn-group');
    buttons.forEach(btn => btn.remove());
    
    // Create PDF
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('landscape');
    
    // Add title
    doc.setFontSize(18);
    doc.text('Sales Report', 14, 15);
    
    // Add date range if filtered
    const filter = document.getElementById('filterDropdown').value;
    if (filter !== 'all') {
        doc.setFontSize(11);
        doc.text(`Period: ${filter}`, 14, 25);
    }
    
    // Add table using autoTable plugin
    doc.autoTable({
        html: exportTable,
        startY: 30,
        theme: 'grid',
        styles: { fontSize: 9 },
        headStyles: { fillColor: [102, 126, 234] }
    });
    
    // Add summary
    const totalRevenue = document.querySelector('.stats-card:nth-child(2) h3').textContent;
    doc.setFontSize(12);
    doc.text(`Total Revenue: ${totalRevenue}`, 14, doc.lastAutoTable.finalY + 10);
    
    // Save PDF
    doc.save(`sales-report-${new Date().toISOString().split('T')[0]}.pdf`);
    
    // Reinitialize DataTable
    $('#salesTable').DataTable({
        pageLength: 10,
        lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
        dom: '<"row"<"col-md-6"l><"col-md-6"f>>rt<"row"<"col-md-6"i><"col-md-6"p>>'
    });
}

// Export to Excel
function exportToExcel() {
    // Destroy DataTable to get original table
    $('#salesTable').DataTable().destroy();
    
    // Create Excel file using DataTables export
    $('#salesTable').DataTable({
        dom: 'Bfrtip',
        buttons: [
            {
                extend: 'excel',
                text: '<i class="fas fa-file-excel me-2"></i> Excel',
                className: 'btn btn-success',
                title: `Sales Report - ${new Date().toLocaleDateString()}`,
                exportOptions: {
                    columns: ':visible'
                }
            }
        ]
    });
    
    // Trigger Excel export
    $('.buttons-excel').click();
    
    // Reinitialize DataTable without export buttons
    setTimeout(() => {
        $('#salesTable').DataTable({
            pageLength: 10,
            lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
            dom: '<"row"<"col-md-6"l><"col-md-6"f>>rt<"row"<"col-md-6"i><"col-md-6"p>>'
        });
    }, 1000);
}

// Print report
function printReport() {
    // Destroy DataTable to get original table
    $('#salesTable').DataTable().destroy();
    
    // Create print window
    const printContent = document.getElementById('printableContent').innerHTML;
    const printWindow = window.open('', '_blank', 'width=900,height=600');
    
    printWindow.document.write(`
        <html>
            <head>
                <title>Sales Report</title>
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
                <style>
                    @media print {
                        .no-print { display: none !important; }
                        body { padding: 20px; }
                        table { width: 100%; border-collapse: collapse; }
                        th { background: #f8f9fa !important; }
                        .status-badge { padding: 3px 8px; border-radius: 10px; font-size: 11px; }
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <h3 class="mb-4"><i class="fas fa-chart-line me-2"></i>Sales Report</h3>
                    ${printContent}
                </div>
                <script>
                    window.onload = function() {
                        window.print();
                        setTimeout(() => window.close(), 1000);
                    }
                <\/script>
            </body>
        </html>
    `);
    
    printWindow.document.close();
    
    // Reinitialize DataTable
    setTimeout(() => {
        $('#salesTable').DataTable({
            pageLength: 10,
            lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
            dom: '<"row"<"col-md-6"l><"col-md-6"f>>rt<"row"<"col-md-6"i><"col-md-6"p>>'
        });
    }, 2000);
}
</script>

<%- include('./layout/footer.ejs')-%>