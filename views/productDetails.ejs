<%- include('./adminHeader.ejs')-%>







<div class="col-lg-12 grid-margin stretch-card">
    <%- include('./adminSidebar.ejs')-%>
    <div class="card">
       
      <div class="card-body">
        <h4 class="card-title">products</h4>
       
       
<div class="container-scroller" >




      <form  id="searchForm" class="nav-link d-flex" role="search">
          <div class="input-group">
              <input name="searchQuery" id="searchInput"  type="text" class="form-control" placeholder="Search..." aria-label="Search" aria-describedby="basic-addon2">
              <div class="input-group-append">
                  <button class="btn btn-sm btn-primary" type="button" id="searchButton">Search</button>
              </div>
          </div>
      </form>
      <div id="searchResults"></div>
 
</div>







        <div class="table-responsive">
          <table class="table table-dark">
            <thead>
              <tr>
                <th> # </th>
                <th> ProductName </th>
                <th> Price </th>
                <th> Discount </th>
                <th> Catagory </th>
                
                <th>Count</th>
                <th>Status</th>
                <th><a href="./productAdd" style="color:rgba(107, 235, 164, 1); background: none; border: none;" >Add</a></th>
                <th>  </th>
                <th>  </th>
                <th>  </th>
                <th>  </th>
            
              </tr>
            </thead>
            <tbody id="#list" >
                <% productData.forEach((product, index) => { %>

                  
                    <tr class="user-row">
                      <td id="displayedIndex"><%= index + 1 %>  </td>
                      <td id="name"><%= product.ProductName %></td>
                      <td >$<%= product.ProductPrice %></td>
                      <td>$<%= product.ProductDiscount %></td>
                      <td><%= product.Catagory %></td>
                      <td></td>
                      <td>
                       
                     
 
                <td><a href="./productAdd?id=<%= product._id %>" style="color:rgba(107, 235, 164, 1); background: none; border: none;">Edit</a>      
                    </td>                  
                    <td>
                        <form   action="/productDetails/delete/<%= product._id %>" method="POST" style="display: inline;">
                           <button type="submit"style="color: rgba(245, 37, 37, 1); background: none; border: none;" onclick=" return confirmDelete('<%= product._id %>', '<%= product.productName %>')">Delete</button>
                           
                          </form>
                     
                    
                      </td>
                      
                    </tr>
                    <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script>
    function confirmDelete(productId,productName){
     var result = `are you sure you want to delete ${productName}`
     return result
    }
  </script>



  <script>
    document.addEventListener("DOMContentLoaded", () => {

        // Select the search input field
        const productSearchInput = document.getElementById('searchInput');

        // Select all product rows
        const productRows = document.querySelectorAll('.user-row');

        productSearchInput.addEventListener('input', () => {
            const searchTerm = productSearchInput.value.toLowerCase();

            // Loop through all product rows and hide those that don't match the search term
            productRows.forEach((row,index) => {
                const productName = row.querySelector('#name').textContent.toLowerCase();
               // const productCategory = row.querySelector('#email').textContent.toLowerCase();

                if (
                    productName.includes(searchTerm) ||
                    productCategory.includes(searchTerm)
                ) {
                    row.style.display = 'table-row';
                    const displayedIndex = index + 1;
                    row.querySelector('#displayedIndex').textContent = displayedIndex;
                } else {
                    row.style.display = 'none';
                }
            });
        });

    })
    </script>
    
    
    










<%- include('./adminFooter.ejs')-%>